// SPDX-License-Identifier: PMPL-1.0-or-later
= Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

== [Unreleased]

=== Planned (Phase 2 - Weeks 5-8)
- Reservoir computing (Echo State Network) for context compression
- RAG system with embedding model and vector database
- Knowledge graph for project relationship tracking
- SQLite persistence for conversation history

=== Planned (Phase 3 - Weeks 9-12)
- Mixture of Experts (MoE) with specialized models
- Bayesian decision engine for confidence scoring
- Background monitoring for proactive assistance

=== Planned (Phase 4 - Months 4+)
- Spiking Neural Networks for ultra-low-power wake detection
- Reinforcement learning for personalized routing
- On-device fine-tuning capabilities

== [0.1.0] - 2025-11-22

=== Added
- **Phase 1 MVP**: Complete hybrid AI orchestrator implementation
- **Expert System** (`src/expert.rs`):
  - Rule-based safety enforcement
  - Privacy protection (API key/password detection)
  - Configurable safety rules with IDs and descriptions
  - Explainable blocking decisions
- **Router** (`src/router.rs`):
  - Heuristic-based query routing (local vs. remote)
  - Keyword detection for complex reasoning
  - Length-based routing decisions
  - Confidence scoring
- **Context Manager** (`src/context.rs`):
  - In-memory conversation history (last 100 turns)
  - Project-specific context switching
  - JSON serialization/deserialization for persistence
  - Context snapshots for query augmentation
- **Orchestrator** (`src/orchestrator.rs`):
  - Main pipeline coordinating all components
  - Safety-first processing (expert system first)
  - Error handling and graceful degradation
  - Offline-first by default
- **CLI Interface** (`src/main.rs`):
  - Interactive mode with commands (`/project`, `/history`, `/clear`)
  - Single-query mode
  - Project context support
  - Verbose output mode (VERBOSE=1)
- **Type System** (`src/types.rs`):
  - `Query`, `Response`, `RoutingDecision` core types
  - Serializable data structures
  - Zero-copy where possible

=== Documentation
- **README.md**: Comprehensive project overview
- **claude.md**: Detailed architecture documentation (10,000+ words)
- **SECURITY.md**: Security policy and vulnerability reporting
- **CONTRIBUTING.md**: Contribution guidelines with TPCF explanation
- **CODE_OF_CONDUCT.md**: Contributor Covenant v2.1 + project-specific additions
- **MAINTAINERS.md**: Perimeter structure and decision-making process
- **CHANGELOG.md**: This file
- **LICENSE.txt**: Dual MIT + Palimpsest-0.8 licensing

=== Testing
- Unit tests for all core components (>90% coverage)
- Expert system safety rule tests
- Router decision logic tests
- Context manager serialization tests
- Orchestrator integration tests

=== Infrastructure
- **Cargo.toml**: Rust project configuration with RSR metadata
- **justfile**: Task automation (build, test, validate)
- **flake.nix**: Nix reproducible build specification
- **.gitlab-ci.yml**: CI/CD pipeline configuration
- **.well-known/**: RFC 9116 security.txt, ai.txt, humans.txt

=== RSR Compliance
- ✅ Bronze-level Rhodium Standard Repository compliance
- ✅ Zero `unsafe` blocks (`#![forbid(unsafe_code)]`)
- ✅ Type safety (Rust compile-time guarantees)
- ✅ Memory safety (ownership model)
- ✅ Offline-first (network is optional feature)
- ✅ Minimal dependencies (2 required: serde, serde_json)
- ✅ TPCF Perimeter 3 (Community Sandbox)

=== Build Configuration
- Release profile optimized for size (`opt-level = "z"`)
- LTO and single codegen-unit for maximum optimization
- Stripped binaries for production
- Feature flags for optional network functionality

== [0.0.0] - 2025-11-22

=== Added
- Initial repository setup
- Git initialization
- Branch: `claude/offline-mobile-docs-01TVXFHwwzW6f2o7CSS7xUSG`

---

== Version History Summary

| Version | Date | Description | RSR Level |
|---------|------|-------------|-----------|
| **0.1.0** | 2025-11-22 | Phase 1 MVP | Bronze ✅ |
| 0.2.0 | TBD | Phase 2 (Reservoir + RAG) | Silver (goal) |
| 0.3.0 | TBD | Phase 3 (MoE + Bayesian) | Silver |
| 1.0.0 | TBD | Production-ready | Gold (goal) |

---

== Upgrade Guide

=== From 0.0.0 to 0.1.0

**Breaking Changes**: None (initial release)

**New Features**:
- Full Phase 1 MVP functionality
- CLI interface for interactive and single-query modes

**Migration**:
[source,bash]
----
= Build from source
git pull origin main
cargo build --release
./target/release/mobile-ai --help
[source,]
----

=== Future: From 0.1.0 to 0.2.0 (Planned)

**Expected Breaking Changes**:
- Context manager API will change (SQLite persistence)
- Reservoir state added to `ContextSnapshot`
- New configuration options for RAG

**Migration Guide**: Will be provided in 0.2.0 release

---

== Development Cycle

**Release Cadence**:
- **Phase 1**: Initial release (0.1.0)
- **Phase 2-4**: Monthly feature releases (0.2.0, 0.3.0, etc.)
- **Patch releases**: As needed for critical bugs/security

**Branching Strategy**:
- `main`: Stable releases only
- `develop`: Integration branch for Phase work
- `feature/*`: Individual feature branches
- `hotfix/*`: Security/critical bug fixes

**Versioning**:
- **MAJOR**: Breaking API changes, architectural overhauls
- **MINOR**: New features, Phase milestones
- **PATCH**: Bug fixes, documentation, non-breaking improvements

---

== Deprecation Policy

**Notice Period**: 2 minor versions (e.g., deprecated in 0.2.0, removed in 0.4.0)

**Announcement**:
1. Add `#[deprecated]` attribute to code
2. Add CHANGELOG entry under "Deprecated"
3. Update documentation with migration path
4. Emit compiler warnings

**Example**:
[source,rust]
----
#[deprecated(since = "0.2.0", note = "Use `new_api()` instead")]
pub fn old_api() { ... }
[source,]
----

---

== Security Updates

Security fixes will be released as **patch versions** and backported to supported major versions.

**Supported Versions**:
- Latest minor version: ✅ Full support
- Previous minor version: ⚠️ Security fixes only
- Older versions: ❌ Unsupported (upgrade recommended)

See [SECURITY.md](SECURITY.md) for vulnerability reporting.

---

== Links

- **Repository**: https://github.com/Hyperpolymath/heterogenous-mobile-computing
- **Documentation**: [claude.md](claude.md), [README.md](README.md)
- **Issues**: https://github.com/Hyperpolymath/heterogenous-mobile-computing/issues
- **Releases**: https://github.com/Hyperpolymath/heterogenous-mobile-computing/releases

---

*This changelog is maintained by Perimeter 1 maintainers. All notable changes must be documented here.*

*Format: [Keep a Changelog](https://keepachangelog.com/)*
*Versioning: [Semantic Versioning](https://semver.org/)*
